var __extends=this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i};define(["require","exports","View","List"],function(e,t,i,n){var r=function(e){function t(){e.apply(this,arguments),this.viewName="Repeater",this.collectionName="items",this.itemName="item",this.indexName="index",this.childViewType=i,this.currentList=new n,this._surfaceRoots=[],this._bindings=[{id:"0",childId:"surface"}]}return __extends(t,e),t.prototype.onRenderElement=function(){return this.element=this._ce("div",[],null,this.getChildElements())},t.prototype.getChildElements=function(){var e=this.getValue(this.collectionName),t=[];e&&e.isList||(e=new n(e)),this.clearChildren();for(var i=0;e&&i<e.getCount();i++)t.push(this._createChild(e.getAt(i),i).renderElement());return t},t.prototype.onViewModelChanged=function(e){if(2===this._state&&e){var t=this.subElements.surface;switch(e.type){case"insert":var i=(document.createElement("div"),document.createDocumentFragment(),this._createChild(e.item,e.index)),n=t.childNodes[e.index],r=i.renderElement();n?t.insertBefore(r,n):t.appendChild(r),i.activate();break;case"remove":var s=t.childNodes[e.index];s.control.dispose(),t.removeChild(s)}}},t.prototype._createChild=function(e,t){var i,n=this.addChild(new this.childViewType,this.owner);return i={},i[this.itemName]=e,i[this.indexName]=t,n.setData(i),n},t}(i);return r});